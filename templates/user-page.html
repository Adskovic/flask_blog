{% include 'header.html' %}
{% from "bootstrap5/form.html" import render_form %}

<main>

    <!-- Flash messeges -->
    <div class="flash mt-3">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash alert alert-{{ category }} mx-5" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>

    <!-- Page Header-->
    <div class="card mx-5 my-3 border-0">
        <svg class="bd-placeholder-img card-img-top py-4 text-center text-light rounded-4" style="background-image: url(/static/assets/img/home.jpg);"></svg>

            <div class="card-body mx-5">
                <!-- <div class="w-50 h-100 p-5 mx-5 bg-body-tertiary border rounded-3"> -->
                    
                    
                    <!-- Profile information -->
                    <div class="row row-cols-lg-1 gx-4 gx-lg-5 justify-content-center">
                        <div class="user-info col-xl-3">
                            <!-- Profile picture -->
                            <div class="profile-header">
                                <div class="profile-picture-container">
                                    <img src="{{ current_user.profile_picture }}" alt="Profile Picture">
                                </div>
                            </div>
                        <h1 class="mb-3 mt-5 text-center">{{ current_user.name }}</h1>
                        <div class="pt-4 ps-4 mt-3 align-items-center">
                            <p>Role:
                            {% if current_user.id == 1 %}
                            Admin
                            {% else %}
                            User
                            {% endif %}
                            </p>
                            <p>Joined: </p>
                            <p>Total comments: {{ current_user.comments|length }} </p>
                            <p>Email: {{ current_user.email }} </p>
                            <p>Location: {{ current_user.location }} <a href="#" onclick="toggleForm('editLocationForm')"><i class="bi bi-pencil-fill opacity-50" style="font-size: 0.8rem;"></i></a></p>
                                <form action="{{ url_for('profile')}}" method="POST" class="hidden" id="editLocationForm">
                                    {{ form.csrf_token }}
                                    {{ form.location }} {{ form.submit }}
                                </form>
                            </div>
                        </div>
                        <!-- Profile Bio -->
                        <div class="user-bio col-xl-6 mx-2">
                            <h4 class="mt-3">Bio:</h4>
                            <p class="text-center mt-4">{{ current_user.bio }} <a href="#" onclick="toggleForm('editBioForm')"><i class="bi bi-pencil-fill opacity-50" style="font-size: 0.8rem;"></i></a></p>
                                <form action="{{ url_for('profile')}}" method="POST" class="hidden" id="editBioForm">
                                    {{ form.csrf_token }}
                                    {{ form.bio }}
                                </form>
                        </div>

                </div>
            </div>
        </div>
    </div>
</main>

{% include "footer.html" %}
